"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[987],{8987:(Q,_,c)=>{c.r(_),c.d(_,{HodModule:()=>P});var f=c(9808),i=c(4182),g=c(268),u=c(5861),b=c(5226),d=c.n(b),e=(c(6546),c(882),c(2096)),Z=c(5869),T=c(4485),A=c(2557);function S(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"button",36),e.NdJ("click",function(){const n=e.CHM(t),r=n.$implicit,l=n.index;return e.oxw(2).updateAssignStaff(r.id,l)}),e._UZ(3,"i",37),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"button",38),e.NdJ("click",function(){const n=e.CHM(t),r=n.$implicit,l=n.index;return e.oxw(2).removeAssignStaff(r.id,l)}),e._UZ(6,"i",39),e.qZA(),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(8),e.Oqu(t.program_name),e.xp6(2),e.Oqu(t.course_code),e.xp6(2),e.Oqu(t.course_title),e.xp6(2),e.Oqu(t.section),e.xp6(2),e.Oqu(t.name)}}function v(o,a){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"table",33),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th",34),e._uU(5,"Action"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Program"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Course Code"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Course Title"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Section"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Name of Staff"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"tbody"),e.YNc(17,S,17,5,"tr",35),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.assignedStaffDetails)}}function y(o,a){1&o&&(e.TgZ(0,"div"),e.TgZ(1,"div",40),e._uU(2," No Data Found. Please Add Staff Data! "),e.qZA(),e.qZA())}function q(o,a){if(1&o&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.batchNo," ")}}function k(o,a){if(1&o&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.program_name," ")}}function x(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"label"),e._uU(2,"Select Semester : "),e.qZA(),e.TgZ(3,"select",42),e.NdJ("change",function(n){return e.CHM(t),e.oxw().sendSemesterNo(n)}),e.TgZ(4,"option",22),e._uU(5,"Select Semester"),e.qZA(),e.TgZ(6,"option",43),e._uU(7,"Semester - 1"),e.qZA(),e.TgZ(8,"option",44),e._uU(9,"Semester - 2"),e.qZA(),e.TgZ(10,"option",45),e._uU(11,"Semester - 3"),e.qZA(),e.TgZ(12,"option",46),e._uU(13,"Semester - 4"),e.qZA(),e.TgZ(14,"option",47),e._uU(15,"Semester - 5"),e.qZA(),e.TgZ(16,"option",48),e._uU(17,"Semester - 6"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.uIk("disabled",t.update?"disabled":null)}}function C(o,a){if(1&o&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.course_title," ")}}function N(o,a){if(1&o&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}function U(o,a){if(1&o&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}let I=(()=>{class o{constructor(t,s,n,r){this.api=t,this.spinner=s,this.route=n,this.auth=r,this.programs=[],this.batchInfo=[],this.sections=[],this.semesterNumber=0,this.semNumberRestore=0,this.assignedStaffDetails=[],this.section_remove=[],this.is_submitted=!1,this.update=!1,this.sectionNames=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}ngOnInit(){this.assignStaffForm=new i.cw({batchNo:new i.NI("",i.kI.required),department_id:new i.NI("",i.kI.required),program_id:new i.NI("",i.kI.required),course_id:new i.NI("",i.kI.required),section:new i.NI("",i.kI.required),semester:new i.NI("",i.kI.required),user_id:new i.NI("",i.kI.required)}),this.getBatch(),this.getUserData()}formReset(){this.is_submitted=!1,this.assignStaffForm.reset(),this.sections=[]}datatablesStaff(){$(function(){$("#example1").DataTable({responsive:!0,lengthChange:!1,processing:!0,autoWidth:!1,buttons:[{extend:"pdf",columns:[1,2,3,4,5]},{extend:"csv",columns:[1,2,3,4,5]},{extend:"excel",columns:[1,2,3,4,5]},{extend:"print",columns:[1,2,3,4,5]},{extend:"colvis",columns:[1,2,3,4,5]},{extend:"copy",columns:[1,2,3,4,5]}]}).buttons().container().appendTo("#example1_wrapper .col-md-6:eq(0)")})}closeModel(){this.assignStaffForm.reset(),$("#assignstaff").modal("hide"),this.sections=[]}getBatch(){var t=this;return(0,u.Z)(function*(){t.spinner.show(),yield t.api.getBatchUnique().toPromise().then(s=>{console.log(s),t.batchDetails=s,t.spinner.hide()}).catch(s=>{t.spinner.hide(),d().fire("Error",s.message,"error")}),yield t.api.getBatch().toPromise().then(s=>{console.log(s),t.batchDetail=s,t.spinner.hide()}).catch(s=>{t.spinner.hide(),d().fire("Error",s.message,"error")}),t.spinner.hide()})()}getUserData(){var t=this;return(0,u.Z)(function*(){t.spinner.show(),yield t.auth.getUser().toPromise().then(s=>{t.UserData=s,t.currentUserId=t.UserData.id,t.departments_id=t.UserData.department_id,t.get_programs(),t.getStaff(),t.getAssignedStaff(t.UserData.department_id),t.spinner.hide()}).catch(s=>console.log(s))})()}get_programs(){var t=this;return(0,u.Z)(function*(){t.spinner.show(),yield t.api.getHodPrograms(t.UserData.department_id).toPromise().then(s=>{t.programs=s,t.spinner.hide()}).catch(s=>{t.spinner.hide(),d().fire("Error",s.message,"error")}),t.spinner.hide()})()}sendProgramID(t){this.program_id=t.target.value,this.sections=[],this.courses=null}sendSemesterNo(t){console.log(this.program_id),this.semesterNumber=t.target.value,this.program_id?(console.log(this.program_id,this.semesterNumber),this.getCourseHOD(this.program_id,this.semesterNumber)):d().fire("Type Error","Please Select Program","warning")}getCourseHOD(t,s){var n=this;return(0,u.Z)(function*(){n.spinner.show(),yield n.api.getCourseHODwithSem(t,s).toPromise().then(r=>{n.courses=r,console.log(n.courses),n.spinner.hide()}).catch(r=>{n.spinner.hide(),d().fire("Error",r.message,"error")}),n.spinner.hide()})()}sendCourseId(t){if(this.sections=[],this.courseId=t.target.value,this.batchInfo=this.batchDetail.find(n=>n.program_id==this.program_id),this.assignedStaffDetails.length<=0){console.log(this.assignedStaffDetails),console.log(this.batchInfo);var s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];this.sections=[];for(let n=0;n<this.batchInfo.NoSections;n++)this.sections.push(s[n])}else{this.sections=[],s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];let r=parseInt(this.batchInfo.NoSections);for(let l=0;l<r;l++)this.sections.push(s[l]);for(let l=0;l<this.assignedStaffDetails.length;l++)this.assignedStaffDetails[l].course_id==this.courseId&&this.section_remove.push(this.assignedStaffDetails[l].section);this.sections=this.sections.filter(l=>!this.section_remove.includes(l))}}getStaff(){var t=this;return(0,u.Z)(function*(){t.spinner.show();var s=yield t.api.getStaffDetail(t.UserData.department_id).toPromise();t.staffs=s,console.log(t.staffs),t.spinner.hide()})()}openModal(){this.update=!1,$("#assignstaff").modal("show")}getAssignedStaff(t){var s=this;return(0,u.Z)(function*(){s.spinner.show(),yield s.api.getStaffAssignForSection(s.UserData.department_id).toPromise().then(n=>{$.fn.DataTable.isDataTable("#example1")&&$("#example1").DataTable().clear().destroy(),s.datatablesStaff(),s.assignedStaffDetails=n}).catch(n=>{s.spinner.hide(),d().fire("Error",n.message,"error")}),console.log(s.assignedStaffDetails),s.spinner.hide()})()}onSubmit(){var t=this;return(0,u.Z)(function*(){t.assignStaffForm.patchValue({department_id:t.UserData.department_id}),t.assignStaffForm.valid&&(console.log(t.assignStaffForm.value),t.spinner.show(),yield t.api.StaffAssignForSection(t.assignStaffForm.value).toPromise().then(s=>{t.assignStaffForm.reset(),t.getAssignedStaff(t.UserData.department_id),d().fire({icon:"success",title:"success",text:"Staff Added Successfully !"}),t.formReset(),$("#assignstaff").modal("hide"),t.spinner.hide()}).catch(s=>{t.formReset(),$("#assignstaff").modal("hide"),d().fire({icon:"error",title:"Oops",text:"Something went wrong !"}),t.spinner.hide()}))})()}updateAssignStaff(t,s){var n=this;return(0,u.Z)(function*(){n.assignStaffForm.patchValue({batchNo:"",department_id:"",program_id:"",course_id:"",section:"",semester:"",user_id:""});const r=yield n.assignedStaffDetails.find(l=>l.id==t);n.getCourseHOD(n.assignedStaffDetails[s].program_id,n.assignedStaffDetails[s].semester),console.log(typeof n.assignedStaffDetails[s].NoSections),console.log(n.assignedStaffDetails[s]),console.log(n.staffs),console.log(r),n.sections=n.sectionNames,n.assignStaffForm.reset(),n.assignStaffForm.setValue({batchNo:r.batch_id,department_id:r.department_id,program_id:r.program_id,course_id:r.course_id,section:r.section,semester:r.semester,user_id:r.user_id}),n.semesterNumber=r.semester,n.update=!0,$("#assignstaff").modal("show")})()}onUpdateSubmit(){console.log(this.assignStaffForm.value)}removeAssignStaff(t,s){var n=this;d().fire({title:"Are You Sure?",text:"You want to delete: "+this.assignedStaffDetails[s].course_code+" - "+this.assignedStaffDetails[s].course_title+" => SECTION - "+this.assignedStaffDetails[s].section,icon:"warning",showCancelButton:!0,cancelButtonColor:"#d33",showConfirmButton:!0,confirmButtonColor:"#2196f3",confirmButtonText:"Yes delete"}).then(function(){var r=(0,u.Z)(function*(l){l.isConfirmed&&(n.spinner.show(),yield n.api.deleteStaffAssignForSection(t).toPromise().then(p=>{n.getAssignedStaff(n.UserData.department_id),d().fire({icon:"success",title:"success",text:"Course Deleted Successfully !"}),n.spinner.hide()}).catch(p=>{n.spinner.hide(),d().fire({icon:"error",title:"Oops",text:"Something went wrong !"})}))});return function(l){return r.apply(this,arguments)}}())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.s),e.Y36(T.t2),e.Y36(g.F0),e.Y36(A.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-assignstaff"]],decls:68,vars:13,consts:[[1,"container"],[1,"card","card-secondary"],[1,"card-header","bg-secondary","d-flex","align-items-center","justify-content-between"],[2,"color","white","font-weight","bold"],[1,"fa","fa-building",2,"margin-right","5px"],[1,"ml-auto"],["type","button",1,"btn","btn-outline-light",3,"click"],[1,"fa","fa-user-plus",2,"font-size","20px"],[1,"card-body"],[4,"ngIf"],[3,"formGroup"],["id","assignstaff","tabindex","-1","role","dialog","aria-labelledby","assignstaffModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-lg","modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","assignstaffModalLabel",1,"modal-title"],["type","button","id","staticBackdrop",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-4"],["formControlName","batchNo",1,"form-control"],["selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","program_id",1,"form-control",3,"change"],["class","col-md-4",4,"ngIf"],["formControlName","course_id",1,"form-control",3,"change"],["formControlName","section",1,"form-control"],["disabled","","selected",""],["formControlName","user_id",1,"form-control"],["type","submit","value","submit",1,"btn","btn-primary",3,"click"],[1,"modal-footer"],["type","button","id","staticBackdrop",1,"btn","btn-secondary",3,"click"],["id","example1",1,"table"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-user-edit"],[1,"btn","btn-sm","btn-danger","mx-3",3,"click"],[1,"fas","fa-trash"],[1,"alert","alert-warning"],[3,"value"],["formControlName","semester",1,"form-control",3,"change"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h4",3),e._UZ(4,"i",4),e._uU(5," ASSIGN STAFF "),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return s.openModal()}),e._UZ(8,"i",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.YNc(10,v,18,1,"div",9),e.YNc(11,y,3,0,"div",9),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"form",10),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"div",13),e.TgZ(17,"div",14),e.TgZ(18,"h5",15),e._uU(19," Assign Staff(Assesment) "),e.qZA(),e.TgZ(20,"button",16),e.NdJ("click",function(){return s.closeModel()}),e.TgZ(21,"span",17),e._uU(22,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",18),e.TgZ(24,"div",19),e.TgZ(25,"div",20),e.TgZ(26,"label"),e._uU(27,"Select Batch : "),e.qZA(),e.TgZ(28,"select",21),e.TgZ(29,"option",22),e._uU(30,"Select Batch"),e.qZA(),e.YNc(31,q,2,2,"option",23),e.qZA(),e.qZA(),e.TgZ(32,"div",20),e.TgZ(33,"label"),e._uU(34,"Select Program : "),e.qZA(),e.TgZ(35,"select",24),e.NdJ("change",function(r){return s.sendProgramID(r)}),e.TgZ(36,"option",22),e._uU(37,"Select Program"),e.qZA(),e.YNc(38,k,2,2,"option",23),e.qZA(),e.qZA(),e.YNc(39,x,18,1,"div",25),e.qZA(),e._UZ(40,"br"),e.TgZ(41,"div",19),e.TgZ(42,"div",20),e.TgZ(43,"label"),e._uU(44,"Select Course : "),e.qZA(),e.TgZ(45,"select",26),e.NdJ("change",function(r){return s.sendCourseId(r)}),e.TgZ(46,"option",22),e._uU(47,"Select Course"),e.qZA(),e.YNc(48,C,2,2,"option",23),e.qZA(),e.qZA(),e.TgZ(49,"div",20),e.TgZ(50,"label"),e._uU(51,"Select Section : "),e.qZA(),e.TgZ(52,"select",27),e.TgZ(53,"option",28),e._uU(54,"Select Section"),e.qZA(),e.YNc(55,N,2,2,"option",23),e.qZA(),e.qZA(),e.TgZ(56,"div",20),e.TgZ(57,"label"),e._uU(58,"Select Staff : "),e.qZA(),e.TgZ(59,"select",29),e.TgZ(60,"option",28),e._uU(61,"Select Staff"),e.qZA(),e.YNc(62,U,2,2,"option",23),e.qZA(),e.qZA(),e.qZA(),e._UZ(63,"br"),e.TgZ(64,"input",30),e.NdJ("click",function(){return s.onSubmit()}),e.qZA(),e.TgZ(65,"div",31),e.TgZ(66,"button",32),e.NdJ("click",function(){return s.closeModel()}),e._uU(67," close "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngIf",s.assignedStaffDetails.length>0),e.xp6(1),e.Q6J("ngIf",0==s.assignedStaffDetails.length),e.xp6(2),e.Q6J("formGroup",s.assignStaffForm),e.xp6(15),e.uIk("disabled",s.update?"disabled":null),e.xp6(3),e.Q6J("ngForOf",s.batchDetails),e.xp6(4),e.uIk("disabled",s.update?"disabled":null),e.xp6(3),e.Q6J("ngForOf",s.programs),e.xp6(1),e.Q6J("ngIf",s.programs.length>0),e.xp6(6),e.uIk("disabled",s.update?"disabled":null),e.xp6(3),e.Q6J("ngForOf",s.courses),e.xp6(4),e.uIk("disabled",s.update?"disabled":null),e.xp6(3),e.Q6J("ngForOf",s.sections),e.xp6(7),e.Q6J("ngForOf",s.staffs))},directives:[f.O5,f.sg,i._Y,i.JL,i.sg,i.EJ,i.JJ,i.u,i.YN,i.Kr],styles:[""]}),o})();var w=c(204);function F(o,a){if(1&o&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.course_id),e.xp6(1),e.hij(" ",t.course_code+" - "+t.course_title," ")}}function D(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr",19),e.TgZ(2,"td",15),e.TgZ(3,"h5"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"td",15),e._UZ(6,"input",20),e.qZA(),e.TgZ(7,"td",15),e._UZ(8,"input",21),e.qZA(),e.TgZ(9,"td",15),e._UZ(10,"input",22),e.qZA(),e.TgZ(11,"td",15),e._UZ(12,"input",23),e.qZA(),e.TgZ(13,"td",15),e._UZ(14,"input",24),e.qZA(),e.TgZ(15,"td",15),e._UZ(16,"input",25),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.$implicit,s=a.index,n=e.oxw();e.xp6(1),e.Q6J("formGroupName",s),e.xp6(3),e.Oqu(t.value.student),e.xp6(2),e.Q6J("readonly",n.disable),e.xp6(2),e.Q6J("readonly",n.disable),e.xp6(2),e.Q6J("readonly",n.disable),e.xp6(2),e.Q6J("readonly",n.disable),e.xp6(2),e.Q6J("readonly",n.disable),e.xp6(2),e.Q6J("readonly",n.disable)}}function E(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(1," Submit "),e.qZA()}}function J(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().editOn()}),e._uU(1," Edit "),e.qZA()}}function O(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().update()}),e._uU(1," Update "),e.qZA()}}const M=[{path:"assignstaff",component:I},{path:"exam-marks-entry",component:(()=>{class o{constructor(t,s,n,r,l,m){this.fb=t,this.ms=s,this.api=n,this.auth=r,this.spinner=l,this.route=m,this.edit=!1,this.currentId="",this.courseStudents=[],this.employee="",this.employId="",this.marks=[],this.markEntryId="",this.disable=!1}ngOnInit(){this.cia1Form=this.fb.group({course_id:this.fb.control("",[i.kI.required]),examType:this.fb.control("",[i.kI.required]),section:this.fb.control(""),department_id:this.fb.control(""),markEntry:this.fb.array([],i.kI.required)}),this.getCourseList()}get validForm(){return this.cia1Form.controls}getCourseList(){var t=this;return(0,u.Z)(function*(){t.spinner.show();var s=yield t.auth.getUser().toPromise();t.employee=s,t.employId=t.employee.id,t.department_id=t.employee.department_id;var n=yield t.api.getAssignedCourse(t.employId).toPromise();t.coursesData=n,t.spinner.hide()})()}sendCourseId(t){console.log(this.coursesData),this.courseStudents=[],this.marks=[];const s=this.coursesData.find(n=>n.course_id==t.target.value);console.log(s),this.currentCourse=t.target.value,this.user_id=this.employId,this.section=s.section,this.course_id=s.course_id,this.getStudentList(this.user_id,this.section,this.course_id)}getStudentList(t,s,n){var r=this;return(0,u.Z)(function*(){r.courseStudents=[];let l=[];r.spinner.show();let p=yield r.api.students_Subjects(t,s,n).toPromise();r.studentsData=p,console.log(p);let h=0;for(;h<r.studentsData.length;)l.push(r.studentsData[h].department_number),h++;r.courseStudents=l,console.log(r.courseStudents.length),r.examType&&r.sendExamType(r.examTypeEventObj),r.spinner.hide()})()}sendExamType(t){this.examTypeEventObj=t,this.examType=t.target.value,this.getMarks(this.section,this.course_id,this.examType)}markEntry(){return this.cia1Form.get("markEntry")}newstudents(t){return this.fb.group({student:new i.NI(this.courseStudents[t],[i.kI.required]),k1:new i.NI(""),k2:new i.NI(""),k3:new i.NI(""),k4:new i.NI(""),k5:new i.NI(""),k6:new i.NI("")})}editMarks(t){return this.fb.group({student:new i.NI(this.marks[t].student,[i.kI.required]),k1:new i.NI(this.marks[t].k1),k2:new i.NI(this.marks[t].k2),k3:new i.NI(this.marks[t].k3),k4:new i.NI(this.marks[t].k4),k5:new i.NI(this.marks[t].k5),k6:new i.NI(this.marks[t].k6)})}addStudent(t){this.markEntry().push(this.newstudents(t))}editStudent(t){this.markEntry().push(this.editMarks(t))}removeStudent(t){this.markEntry().removeAt(t)}getMarks(t,s,n){var r=this;return(0,u.Z)(function*(){r.spinner.show(),yield r.api.getExternalMarks(t,s).toPromise().then(l=>{const m=l;console.log(m),r.marks=m.assessment,console.log(m.assessment),console.log(r.marks),m.subDetails.length>=1&&(r.markEntryId=m.subDetails[0].id),r.init(),r.spinner.hide()}).catch(l=>{console.log(l),r.spinner.hide(),d().fire("Error",l.message,"error")})})()}init(){let t=this.cia1Form.value.markEntry.length;for(;t>=0;)this.removeStudent(t),t--;if(console.log(this.courseStudents),console.log(this.marks.length),console.log(this.courseStudents.length),0==this.marks.length){console.log("if"),this.disable=!1;for(let s=0;s<this.courseStudents.length;s++)this.addStudent(s)}else if(this.marks.length>0&&this.marks.length<this.courseStudents.length){this.disable=!0,console.log("elseIf");for(let n=0;n<this.marks.length;n++)this.editStudent(n);let s=this.marks.length;for(;s<this.courseStudents.length;)console.log("added"),this.addStudent(s),s++}else{this.disable=!0,console.log(this.courseStudents),console.log("else");for(let s=0;s<this.marks.length;s++)this.editStudent(s);console.log(this.courseStudents)}}onSubmit(){var t=this;return(0,u.Z)(function*(){t.disable=!1,console.log(t.cia1Form.value),t.cia1Form.patchValue({department_id:t.employee.department_id,section:t.section}),console.log(t.cia1Form.value),t.cia1Form.valid&&(console.log(t.cia1Form.value),t.spinner.show(),yield t.api.addMarks(t.cia1Form.value).toPromise().then(s=>{console.log(s),t.getMarks(t.section,t.course_id,t.examType),t.disable=!0,d().fire({icon:"success",title:"success",text:"Marks Added Successfully !"}),t.spinner.hide()}).catch(s=>{d().fire({icon:"error",title:"Oops",text:"Something went wrong !"}),t.spinner.hide()}))})()}editOn(){this.disable=!1}update(){var t=this;return(0,u.Z)(function*(){t.disable=!1,t.cia1Form.valid&&(console.log(t.cia1Form.value),t.spinner.show(),yield t.api.updateExternalMarks(t.cia1Form.value,t.markEntryId).toPromise().then(s=>{t.getMarks(t.section,t.course_id,t.examType),t.disable=!0,d().fire({icon:"success",title:"success",text:"EXTERNAL Marks Updated Successfully !"}),t.spinner.hide()}).catch(s=>{console.log(s),d().fire({icon:"error",title:"Oops",text:"Something went wrong !"}),t.spinner.hide()}))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(w.S),e.Y36(Z.s),e.Y36(A.e),e.Y36(T.t2),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-exammarkentry"]],decls:48,vars:6,consts:[[1,"container"],[1,"card","card-secondary"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["formControlName","course_id",1,"form-control",3,"change"],["value","","selected","","hidden","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","examType",1,"form-control",3,"change"],["value","","disabled","","selected",""],["value","cia1"],["value","cia2"],["value","component"],["value","external"],["formArrayName","markEntry",1,"table","table-bordered","table-striped"],[2,"text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],["class","btn btn-primary","type","submit",3,"click",4,"ngIf"],[3,"value"],[2,"width","100%",3,"formGroupName"],["type","number","formControlName","k1",1,"form-control",3,"readonly"],["type","number","formControlName","k2",1,"form-control",3,"readonly"],["type","number","formControlName","k3",1,"form-control",3,"readonly"],["type","number","formControlName","k4",1,"form-control",3,"readonly"],["type","number","formControlName","k5",1,"form-control",3,"readonly"],["type","number","formControlName","k6",1,"form-control",3,"readonly"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1"),e._uU(4,"MARKS ENTRY"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"label"),e._uU(8,"Select Exam-Type:"),e.qZA(),e.TgZ(9,"label"),e._uU(10,"Select Course:"),e.qZA(),e.TgZ(11,"select",5),e.NdJ("change",function(r){return s.sendCourseId(r)}),e.TgZ(12,"option",6),e._uU(13,"Select Course"),e.qZA(),e.YNc(14,F,2,2,"option",7),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"select",8),e.NdJ("change",function(r){return s.sendExamType(r)}),e.TgZ(17,"option",9),e._uU(18,"Select Exam-Type"),e.qZA(),e.TgZ(19,"option",10),e._uU(20,"CIA - 1"),e.qZA(),e.TgZ(21,"option",11),e._uU(22,"CIA - 2"),e.qZA(),e.TgZ(23,"option",12),e._uU(24,"COMPONENT"),e.qZA(),e.TgZ(25,"option",13),e._uU(26,"EXTERNAL"),e.qZA(),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"table",14),e.TgZ(29,"thead"),e.TgZ(30,"th",15),e._uU(31," Department Number "),e.qZA(),e.TgZ(32,"th",15),e._uU(33,"K1"),e.qZA(),e.TgZ(34,"th",15),e._uU(35,"K2"),e.qZA(),e.TgZ(36,"th",15),e._uU(37,"K3"),e.qZA(),e.TgZ(38,"th",15),e._uU(39,"K4"),e.qZA(),e.TgZ(40,"th",15),e._uU(41,"K5"),e.qZA(),e.TgZ(42,"th",15),e._uU(43,"K6"),e.qZA(),e.qZA(),e.YNc(44,D,17,8,"tbody",16),e.qZA(),e.YNc(45,E,2,0,"button",17),e.YNc(46,J,2,0,"button",17),e.YNc(47,O,2,0,"button",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("formGroup",s.cia1Form),e.xp6(8),e.Q6J("ngForOf",s.coursesData),e.xp6(30),e.Q6J("ngForOf",s.markEntry().controls),e.xp6(1),e.Q6J("ngIf",s.cia1Form.valid&&s.marks.length<=0),e.xp6(1),e.Q6J("ngIf",s.cia1Form.valid&&s.marks.length>0&&s.disable),e.xp6(1),e.Q6J("ngIf",s.cia1Form.valid&&s.marks.length>0&&!s.disable))},directives:[i._Y,i.JL,i.sg,i.EJ,i.JJ,i.u,i.YN,i.Kr,f.sg,i.CE,i.x0,i.wV,i.Fj,f.O5],styles:[""]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,Y,i.UX]]}),o})()}}]);